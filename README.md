# Sanatorium Web Application

Веб-приложение для автоматизации процессов санатория: управление пациентами, сменами, процедурами, комнатами, кабинетами и новостями.

## Содержание

- [Общее описание](#общее-описание)  
- [Функциональные модули](#функциональные-модули)  
- [Технологический стек](#технологический-стек)  
- [Архитектура](#архитектура)  
- [База данных](#база-данных)  
- [Безопасность](#безопасность)  
- [REST API](#rest-api)  
- [Установка и запуск](#установка-и-запуск)  
- [Команда](#команда)

## Общее описание

Проект представляет собой веб-систему для санатория с целями:

- Автоматизации регистрации пациентов и сотрудников  
- Назначения и отслеживания медицинских процедур  
- Управления сменами, комнатами и кабинетами  
- Публикации новостей и работы с обратной связью  

## Функциональные модули

### Основные страницы
- Главная страница с новостями  
- О санатории  
- Смены (активные/архивные)  
- Услуги  
- Контакты  
- Авторизация

### Личные кабинеты по ролям

| Роль | Возможности |
|------|-------------|
| **Пациент** | Просмотр личных данных, смен, назначенных процедур и статистики выполненных процедур |
| **Регистратор** | Регистрация пациентов, оформление на смены, управление комнатами проживания |
| **Врач** | Просмотр пациентов смены, назначение и редактирование процедур |
| **Медработник** | Отметка выполнения процедур, просмотр истории процедур по кабинетам |
| **Администратор** | Полный CRUD по всем сущностям: пользователи, смены, комнаты, кабинеты, процедуры, новости, жалобы и предложения |

## Технологический стек

- **Frontend:** React 18 + TypeScript, React Router, Axios, Context API  
- **Backend:** Spring Boot 3 + Java 21, Spring Security, Spring Data JPA, Hibernate  
- **База данных:** PostgreSQL 17  
- **Аутентификация:** JWT + bcrypt  
- **Логирование:** Logback + SLF4J  
- **Среда разработки:** IntelliJ IDEA  

## Архитектура

- Клиент-серверная монолитная модель  
- Взаимодействие через REST API  
- JWT-токены с ролевой авторизацией  
- Хеширование паролей для безопасности  
- Логирование критических операций для аудита

## REST API (ключевые эндпоинты)

### Аутентификация
- `POST /api/auth/login` – вход  
- `GET /api/auth/me` – информация о текущем пользователе  

### Пользователи
- `GET /api/users` – список пользователей (ADMIN)  
- `POST /api/users` – создание пользователя (REGISTRAR, ADMIN)  
- `PUT /api/users/{id}` – обновление пользователя  
- `DELETE /api/users/{id}` – удаление пользователя (ADMIN)  

### Смены
- `GET /api/shifts` – все смены  
- `GET /api/shifts/active` – активные смены  
- `POST /api/shifts` – создание смены (ADMIN)  
- `PUT /api/shifts/{id}` – обновление смены (ADMIN)  

### Назначения процедур
- `POST /api/appointments` – создание назначения (DOCTOR)  
- `GET /api/appointments/shift/{shiftId}` – назначения по смене  
- `DELETE /api/appointments/{id}` – удаление назначения (DOCTOR)  

### Выполнение процедур
- `POST /api/procedure-completions` – отметка выполнения (NURSE)  
- `GET /api/procedure-completions/by-user/{userId}` – история процедур  

### Новости
- `GET /api/news` – все новости  
- `POST /api/news` – создание новости (ADMIN)  
- `PUT /api/news/{id}` – обновление новости (ADMIN)  

### Обратная связь
- `POST /api/feedback` – отправка сообщения (авторизованные)  
- `GET /api/feedback` – просмотр сообщений (ADMIN)  
- `PUT /api/feedback/{id}/read` – отметка о прочтении (ADMIN)

## Установка и запуск

### Frontend
```bash
cd frontend
npm install
npm start
````

### Backend

1. Создать базу данных `sanatorium_db` на PostgreSQL (порт 5432, имя и пароль `postgres`)
2. Обновить зависимости Maven
3. Запустить Spring Boot приложение

### Логи

* Путь: `/logs/sanatorium.log`
* Формат: `дата время уровень [пользователь] действие статус`

## Команда проекта

* **Сливницин Владислав** – тимлид, бэкенд (Регистратор, Врач), дизайн фронтенда
* **Голов Денис** – бэкенд (Администратор, инфраструктура проекта)
* **Даниил Иванов** – фронтенд, бэкенд (Пациент, Медработник)

## Выполненные мной задачи

- Реализовал роль Администратор на бэкенде.
- Настроил **JWT-аутентификацию** и ролевую модель пользователей (ADMIN, REGISTRAR, DOCTOR, NURSE, USER) через **Spring Security**.
- Оформил проверку прав доступа на контроллерах и сервисах через @PreAuthorize и слои DTO → Service → Repository.
- Спроектировал схему данных в **PostgreSQL**, реализовал JPA-сущности и репозитории на **Spring Data JPA / Hibernate**.
- Внедрил логирование критических операций и событий (SLF4J + Logback), добавил понятный формат логов для аудита.
- Подготовил стабильные API-контракты, облегчив интеграцию фронтенда (axios + context) и ускорив внутреннюю разработку.
